"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[9844],{3905:(e,t,r)=>{r.d(t,{Zo:()=>m,kt:()=>h});var n=r(67294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=n.createContext({}),p=function(e){var t=n.useContext(i),r=t;return e&&(r="function"==typeof e?e(t):l(l({},t),e)),r},m=function(e){var t=p(e.components);return n.createElement(i.Provider,{value:t},e.children)},c="mdxType",u={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},d=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,i=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),c=p(r),d=a,h=c["".concat(i,".").concat(d)]||c[d]||u[d]||o;return r?n.createElement(h,l(l({ref:t},m),{},{components:r})):n.createElement(h,l({ref:t},m))}));function h(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,l=new Array(o);l[0]=d;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s[c]="string"==typeof e?e:a,l[1]=s;for(var p=2;p<o;p++)l[p]=r[p];return n.createElement.apply(null,l)}return n.createElement.apply(null,r)}d.displayName="MDXCreateElement"},24667:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>i,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var n=r(87462),a=(r(67294),r(3905));const o={},l="OpenTelemetry Astronomy Shop Demo",s={unversionedId:"live-examples/opentelemetry-store/overview",id:"live-examples/opentelemetry-store/overview",title:"OpenTelemetry Astronomy Shop Demo",description:"The OpenTelemetry Demo is an example application published by the OpenTelemtry CNCF project. It implements an Astronomy shop in a set of microservices in different languages with OpenTelemetry enabled, intended to be used as an example of OpenTelemetry instrumentation and observability. The Tracetest team has made several key contributions to this project, including providing a full suite of end to end tests.",source:"@site/docs/live-examples/opentelemetry-store/overview.md",sourceDirName:"live-examples/opentelemetry-store",slug:"/live-examples/opentelemetry-store/overview",permalink:"/live-examples/opentelemetry-store/overview",draft:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/live-examples/opentelemetry-store/overview.md",tags:[],version:"current",frontMatter:{},sidebar:"liveExamplesSidebar",next:{title:"OpenTelemetry Store - Add item into the shopping cart",permalink:"/live-examples/opentelemetry-store/use-cases/add-item-into-shopping-cart"}},i={},p=[{value:"Running the OpenTelemetry Astronomy Shop Demo in Docker",id:"running-the-opentelemetry-astronomy-shop-demo-in-docker",level:2},{value:"Prerequisites",id:"prerequisites",level:3},{value:"Get and run the demo",id:"get-and-run-the-demo",level:3},{value:"Verify the web store and Telemetry",id:"verify-the-web-store-and-telemetry",level:2},{value:"Running Tracetests",id:"running-tracetests",level:2},{value:"Use Cases",id:"use-cases",level:2},{value:"System Architecture",id:"system-architecture",level:2}],m={toc:p},c="wrapper";function u(e){let{components:t,...r}=e;return(0,a.kt)(c,(0,n.Z)({},m,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"opentelemetry-astronomy-shop-demo"},"OpenTelemetry Astronomy Shop Demo"),(0,a.kt)("p",null,"The OpenTelemetry Demo is an example application published by the OpenTelemtry CNCF project. It implements an Astronomy shop in a set of microservices in different languages with OpenTelemetry enabled, intended to be used as an example of OpenTelemetry instrumentation and observability. The Tracetest team has made several key contributions to this project, including providing a full suite of end to end tests."),(0,a.kt)("p",null,"We will provide a full recipe below for running the full demo as well as running the associated Tracetests via Docker. Here are other references you may find useful:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Source Code"),": ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/open-telemetry/opentelemetry-demo"},"https://github.com/open-telemetry/opentelemetry-demo")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Running it locally in Docker"),": ",(0,a.kt)("a",{parentName:"li",href:"https://opentelemetry.io/docs/demo/docker-deployment/"},"Instructions")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Running on Kubernetes"),": ",(0,a.kt)("a",{parentName:"li",href:"https://opentelemetry.io/docs/demo/kubernetes-deployment/"},"Instructions"))),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"Tracetest is part of the official testing harness in the latest version of the OpenTelemetry Demo. Read more in the OpenTelemetry docs, ",(0,a.kt)("a",{parentName:"p",href:"https://opentelemetry.io/docs/demo/tests/"},"here"),"."),(0,a.kt)("p",{parentName:"admonition"},"Or, check out the hands-on workshop on YouTube!"),(0,a.kt)("iframe",{width:"100%",height:"250",src:"https://www.youtube.com/embed/2MSDy3XHjtE?si=T0ItpwRyE7HbJu5V",title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:!0})),(0,a.kt)("h2",{id:"running-the-opentelemetry-astronomy-shop-demo-in-docker"},"Running the OpenTelemetry Astronomy Shop Demo in Docker"),(0,a.kt)("h3",{id:"prerequisites"},"Prerequisites"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Docker"),(0,a.kt)("li",{parentName:"ul"},"Docker Compose v2.0.0+"),(0,a.kt)("li",{parentName:"ul"},"4 GB of RAM for the application")),(0,a.kt)("h3",{id:"get-and-run-the-demo"},"Get and run the demo"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Clone the Demo repository:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"git clone https://github.com/open-telemetry/opentelemetry-demo.git\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Change to the demo folder:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"cd opentelemetry-demo/\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Run docker compose",(0,a.kt)("sup",{parentName:"p",id:"fnref-1"},(0,a.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))," to start the demo:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-shell"},"docker compose up --no-build\n")),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},(0,a.kt)("strong",{parentName:"p"},"Notes:")),(0,a.kt)("ul",{parentName:"blockquote"},(0,a.kt)("li",{parentName:"ul"},"The ",(0,a.kt)("inlineCode",{parentName:"li"},"--no-build")," flag is used to fetch released docker images from\n",(0,a.kt)("a",{parentName:"li",href:"https://ghcr.io/open-telemetry/demo"},"ghcr")," instead of building from\nsource. Removing the ",(0,a.kt)("inlineCode",{parentName:"li"},"--no-build")," command line option will rebuild all\nimages from source. It may take more than 20 minutes to build if the\nflag is omitted."),(0,a.kt)("li",{parentName:"ul"},"If you're running on Apple Silicon, run ",(0,a.kt)("inlineCode",{parentName:"li"},"docker compose build"),(0,a.kt)("sup",{parentName:"li",id:"fnref-1"},(0,a.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))," in\norder to create local images vs. pulling them from the repository."))))),(0,a.kt)("h2",{id:"verify-the-web-store-and-telemetry"},"Verify the web store and Telemetry"),(0,a.kt)("p",null,"Once the images are built and containers are started you can access:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"Web store: ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080/"},"http://localhost:8080/")),(0,a.kt)("li",{parentName:"ul"},"Grafana: ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080/grafana/"},"http://localhost:8080/grafana/")),(0,a.kt)("li",{parentName:"ul"},"Feature Flags UI: ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080/feature/"},"http://localhost:8080/feature/")),(0,a.kt)("li",{parentName:"ul"},"Load Generator UI: ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080/loadgen/"},"http://localhost:8080/loadgen/")),(0,a.kt)("li",{parentName:"ul"},"Jaeger UI: ",(0,a.kt)("a",{parentName:"li",href:"http://localhost:8080/jaeger/ui/"},"http://localhost:8080/jaeger/ui/"))),(0,a.kt)("h2",{id:"running-tracetests"},"Running Tracetests"),(0,a.kt)("p",null,"The Tracetest tests for the OpenTelemetry Demo can be found in the official repo here:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Instructions to run (also shown below in this recipe)"),": ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/open-telemetry/opentelemetry-demo/tree/main/test#testing-services-with-trace-based-tests"},"Running Tracetest Tests")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"Full source of all tests"),": ",(0,a.kt)("a",{parentName:"li",href:"https://github.com/open-telemetry/opentelemetry-demo/tree/main/test/tracetesting"},"Source"))),(0,a.kt)("p",null,"To run the entire Test Suite of trace-based tests, run the command:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},"make run-tracetesting\n#or\ndocker compose run traceBasedTests\n")),(0,a.kt)("p",null,"To run tests for specific services, pass the name of the service as a\nparameter (using the folder names located ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/open-telemetry/opentelemetry-demo/tree/main/test/tracetesting"},"here"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'make run-tracetesting SERVICES_TO_TEST="service-1 service-2 ..."\n#or\ndocker compose run traceBasedTests "service-1 service-2 ..."\n')),(0,a.kt)("p",null,"For instance, if you need to run the tests for ",(0,a.kt)("inlineCode",{parentName:"p"},"ad-service")," and\n",(0,a.kt)("inlineCode",{parentName:"p"},"payment-service"),", you can run them with:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sh"},'make run-tracetesting SERVICES_TO_TEST="ad-service payment-service"\n')),(0,a.kt)("p",null,"Tracetest will be started on ",(0,a.kt)("a",{parentName:"p",href:"http://localhost:11633"},"http://localhost:11633")," as part of running these tests and you can view any of the tests, Test Suites, prior runs, or create and run your own tests. It is a great testbed to explore Tracetest!"),(0,a.kt)("h2",{id:"use-cases"},"Use Cases"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/live-examples/opentelemetry-store/use-cases/add-item-into-shopping-cart"},"Add item into shopping cart"),": Simulate a user choosing an item and adding it to the shopping cart."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/live-examples/opentelemetry-store/use-cases/check-shopping-cart-contents"},"Check shopping cart content"),": Simulate a user choosing different products and checking the shopping cart later. "),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/live-examples/opentelemetry-store/use-cases/checkout"},"Checkout"),": Simulates a user choosing a product and later doing a checkout of that product, with billing and shipping info."),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"/live-examples/opentelemetry-store/use-cases/get-recommended-products"},"Get recommended products"),": Simulates a user querying for recommended products.")),(0,a.kt)("h2",{id:"system-architecture"},"System Architecture"),(0,a.kt)("p",null,"This demonstration environment consists of a series of microservices, handling each aspect of the store, such as Product Catalog, Payment, Currency, etc."),(0,a.kt)("p",null,"A detailed description of these services can be seen ",(0,a.kt)("a",{parentName:"p",href:"https://opentelemetry.io/docs/demo/services/"},"here"),"\nand the architecture diagrams can be seen ",(0,a.kt)("a",{parentName:"p",href:"https://opentelemetry.io/docs/demo/architecture/"},"here"),"."))}u.isMDXComponent=!0}}]);