"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[5376],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>h});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),s=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(l.Provider,{value:t},e.children)},u="mdxType",d={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},m=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=s(n),m=o,h=u["".concat(l,".").concat(m)]||u[m]||d[m]||a;return n?r.createElement(h,i(i({ref:t},p),{},{components:n})):r.createElement(h,i({ref:t},p))}));function h(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c[u]="string"==typeof e?e:o,i[1]=c;for(var s=2;s<a;s++)i[s]=n[s];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}m.displayName="MDXCreateElement"},26329:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>i,default:()=>d,frontMatter:()=>a,metadata:()=>c,toc:()=>s});var r=n(87462),o=(n(67294),n(3905));const a={},i="New Relic",c={unversionedId:"configuration/connecting-to-data-stores/new-relic",id:"configuration/connecting-to-data-stores/new-relic",title:"New Relic",description:"If you want to use New Relic as the trace data store, you'll configure the OpenTelemetry Collector to receive traces from your system and then send them to both Tracetest and New Relic. And, you don't have to change your existing pipelines to do so.",source:"@site/docs/configuration/connecting-to-data-stores/new-relic.md",sourceDirName:"configuration/connecting-to-data-stores",slug:"/configuration/connecting-to-data-stores/new-relic",permalink:"/configuration/connecting-to-data-stores/new-relic",draft:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/connecting-to-data-stores/new-relic.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Lightstep",permalink:"/configuration/connecting-to-data-stores/lightstep"},next:{title:"OpenSearch",permalink:"/configuration/connecting-to-data-stores/opensearch"}},l={},s=[{value:"Configuring OpenTelemetry Collector to Send Traces to both New Relic and Tracetest",id:"configuring-opentelemetry-collector-to-send-traces-to-both-new-relic-and-tracetest",level:2},{value:"Configure Tracetest to Use New Relic as a Trace Data Store",id:"configure-tracetest-to-use-new-relic-as-a-trace-data-store",level:2},{value:"Connect Tracetest to New Relic with the Web UI",id:"connect-tracetest-to-new-relic-with-the-web-ui",level:2},{value:"Connect Tracetest to New Relic with the CLI",id:"connect-tracetest-to-new-relic-with-the-cli",level:2}],p={toc:s},u="wrapper";function d(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"new-relic"},"New Relic"),(0,o.kt)("p",null,"If you want to use ",(0,o.kt)("a",{parentName:"p",href:"https://newrelic.com/"},"New Relic")," as the trace data store, you'll configure the OpenTelemetry Collector to receive traces from your system and then send them to both Tracetest and New Relic. And, you don't have to change your existing pipelines to do so."),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Examples of configuring Tracetest with New Relic can be found in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubeshop/tracetest/tree/main/examples"},(0,o.kt)("inlineCode",{parentName:"a"},"examples")," folder of the Tracetest GitHub repo"),".")),(0,o.kt)("h2",{id:"configuring-opentelemetry-collector-to-send-traces-to-both-new-relic-and-tracetest"},"Configuring OpenTelemetry Collector to Send Traces to both New Relic and Tracetest"),(0,o.kt)("p",null,"In your OpenTelemetry Collector config file:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"exporter")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"otlp/tracetest")),(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"endpoint")," to your Tracetest instance on port ",(0,o.kt)("inlineCode",{parentName:"li"},"4317"))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you are running Tracetest with Docker and Tracetest's service name is ",(0,o.kt)("inlineCode",{parentName:"p"},"tracetest"),", then the endpoint might look like this ",(0,o.kt)("inlineCode",{parentName:"p"},"http://tracetest:4317"))),(0,o.kt)("p",null,"Additionally, add another config:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"exporter")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"otlp/newrelic"),"."),(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"endpoint")," pointing to your New Relic account and the New Relic ingest API."),(0,o.kt)("li",{parentName:"ul"},"Set your New Relic access token as a ",(0,o.kt)("inlineCode",{parentName:"li"},"header"),".")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  logging:\n    logLevel: debug\n  # OTLP for Tracetest\n  otlp/tracetest:\n    endpoint: tracetest:4317 # Send traces to Tracetest. Read more in docs here:  https://docs.tracetest.io/configuration/connecting-to-data-stores/opentelemetry-collector\n    tls:\n      insecure: true\n  # OTLP for New Relic\n  otlp/newrelic:\n    endpoint: otlp.nr-data.net:443\n    headers:\n      api-key: <new_relic_ingest_licence_key> # Send traces to New Relic.\n      # Read more in docs here: https://docs.newrelic.com/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/opentelemetry-setup/#collector-export\n      # And here: https://docs.newrelic.com/docs/more-integrations/open-source-telemetry-integrations/opentelemetry/collector/opentelemetry-collector-basic/\n\nservice:\n  pipelines:\n    # Your probably already have a traces pipeline, you don't have to change it.\n    # Add these two to your configuration. Just make sure to not have two\n    # pipelines with the same name\n    traces/tracetest:\n      receivers: [otlp] # your receiver\n      processors: [batch]\n      exporters: [otlp/tracetest] # your exporter pointing to your tracetest instance\n    traces/newrelic:\n      receivers: [otlp] # your receiver\n      processors: [batch]\n      exporters: [logging, otlp/newrelic] # your exporter pointing to your lighstep account\n")),(0,o.kt)("h2",{id:"configure-tracetest-to-use-new-relic-as-a-trace-data-store"},"Configure Tracetest to Use New Relic as a Trace Data Store"),(0,o.kt)("p",null,"Configure your Tracetest instance to expose an ",(0,o.kt)("inlineCode",{parentName:"p"},"otlp")," endpoint to make it aware it will receive traces from the OpenTelemetry Collector. This will expose Tracetest's trace receiver on port ",(0,o.kt)("inlineCode",{parentName:"p"},"4317"),"."),(0,o.kt)("h2",{id:"connect-tracetest-to-new-relic-with-the-web-ui"},"Connect Tracetest to New Relic with the Web UI"),(0,o.kt)("p",null,"In the Web UI, (1) open Settings, and, on the (2) Configure Data Store tab, select (3) New Relic."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"NewRelic",src:n(7137).Z,width:"2854",height:"1568"})),(0,o.kt)("h2",{id:"connect-tracetest-to-new-relic-with-the-cli"},"Connect Tracetest to New Relic with the CLI"),(0,o.kt)("p",null,"Or, if you prefer using the CLI, you can use this file config."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"type: DataStore\nspec:\n  name: New Relic pipeline\n  type: newrelic\n  default: true\n")),(0,o.kt)("p",null,"Proceed to run this command in the terminal and specify the file above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tracetest apply datastore -f my/data-store/file/location.yaml\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To learn more, ",(0,o.kt)("a",{parentName:"p",href:"/examples-tutorials/recipes/running-tracetest-with-new-relic"},"read the recipe on running a sample app with New Relic and Tracetest"),".")))}d.isMDXComponent=!0},7137:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/New-Relic-settings-1ecba0b658acfd9b197eb3abcc79a753.png"}}]);