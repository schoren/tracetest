"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[697],{3905:(e,t,n)=>{n.d(t,{Zo:()=>l,kt:()=>m});var r=n(67294);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var c=r.createContext({}),p=function(e){var t=r.useContext(c),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},l=function(e){var t=p(e.components);return r.createElement(c.Provider,{value:t},e.children)},u="mdxType",h={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},g=r.forwardRef((function(e,t){var n=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,l=s(e,["components","mdxType","originalType","parentName"]),u=p(n),g=a,m=u["".concat(c,".").concat(g)]||u[g]||h[g]||o;return n?r.createElement(m,i(i({ref:t},l),{},{components:n})):r.createElement(m,i({ref:t},l))}));function m(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=n.length,i=new Array(o);i[0]=g;var s={};for(var c in t)hasOwnProperty.call(t,c)&&(s[c]=t[c]);s.originalType=e,s[u]="string"==typeof e?e:a,i[1]=s;for(var p=2;p<o;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}g.displayName="MDXCreateElement"},72962:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>p});var r=n(87462),a=(n(67294),n(3905));const o={},i="Azure App Insights",s={unversionedId:"configuration/connecting-to-data-stores/azure-app-insights",id:"configuration/connecting-to-data-stores/azure-app-insights",title:"Azure App Insights",description:"If you want to use Azure App Insights as the trace data store, you can use the native connection from Tracetest to pull telemetry data.",source:"@site/docs/configuration/connecting-to-data-stores/azure-app-insights.md",sourceDirName:"configuration/connecting-to-data-stores",slug:"/configuration/connecting-to-data-stores/azure-app-insights",permalink:"/configuration/connecting-to-data-stores/azure-app-insights",draft:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/connecting-to-data-stores/azure-app-insights.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"AWS X-Ray",permalink:"/configuration/connecting-to-data-stores/awsxray"},next:{title:"Datadog",permalink:"/configuration/connecting-to-data-stores/datadog"}},c={},p=[{value:"Direct Connection - Configure Tracetest to Use Azure App Insights as a Trace Data Store",id:"direct-connection---configure-tracetest-to-use-azure-app-insights-as-a-trace-data-store",level:2},{value:"Tracetest Direct Connection to Azure App Insights with the Web UI",id:"tracetest-direct-connection-to-azure-app-insights-with-the-web-ui",level:3},{value:"Tracetest Direct Connection to Azure App Insights with the CLI",id:"tracetest-direct-connection-to-azure-app-insights-with-the-cli",level:3},{value:"OpenTelemetry Collector",id:"opentelemetry-collector",level:2},{value:"Tracetest OpenTelemetry Collector connection to Azure App Insights with the Web UI",id:"tracetest-opentelemetry-collector-connection-to-azure-app-insights-with-the-web-ui",level:3},{value:"Tracetest OpenTelemetry Collector connection to Azure App Insights with the CLI",id:"tracetest-opentelemetry-collector-connection-to-azure-app-insights-with-the-cli",level:3}],l={toc:p},u="wrapper";function h(e){let{components:t,...o}=e;return(0,a.kt)(u,(0,r.Z)({},l,o,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"azure-app-insights"},"Azure App Insights"),(0,a.kt)("p",null,"If you want to use ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-overview"},"Azure App Insights")," as the trace data store, you can use the native connection from Tracetest to pull telemetry data."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Examples of configuring Tracetest with Azure App Insights can be found in the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/kubeshop/tracetest/tree/main/examples"},(0,a.kt)("inlineCode",{parentName:"a"},"examples")," folder of the Tracetest GitHub repo"),".")),(0,a.kt)("h2",{id:"direct-connection---configure-tracetest-to-use-azure-app-insights-as-a-trace-data-store"},"Direct Connection - Configure Tracetest to Use Azure App Insights as a Trace Data Store"),(0,a.kt)("p",null,"Configure Tracetest to be aware that it has to fetch trace data from Azure App Insights."),(0,a.kt)("p",null,"Tracetest uses the Golang ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/developer/go/"},"Azure SDK")," library to pull to fetch trace data."),(0,a.kt)("h3",{id:"tracetest-direct-connection-to-azure-app-insights-with-the-web-ui"},"Tracetest Direct Connection to Azure App Insights with the Web UI"),(0,a.kt)("p",null,"In the Web UI, (1) open Settings, and, on the (2) Configure Data Store tab, select (3) Azure App Insights."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure App Insights Direct Connection Settings",src:n(41439).Z,width:"2560",height:"1792"})),(0,a.kt)("p",null,"From the configuration page, add your ",(0,a.kt)("a",{parentName:"p",href:"https://learn.microsoft.com/en-us/azure/azure-monitor/app/app-insights-azure-ad-api"},"App Insights API Access Token"),". Or if you are running Tracetest from a authorized container, you can use the default Active Directory Authentication."),(0,a.kt)("p",null,"Finally, add the resource ARM ID for the Azure App Insights instance."),(0,a.kt)("h3",{id:"tracetest-direct-connection-to-azure-app-insights-with-the-cli"},"Tracetest Direct Connection to Azure App Insights with the CLI"),(0,a.kt)("p",null,"Or, if you prefer using the CLI, you can use this file config."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"type: DataStore\nspec:\n  name: AzureAppInsights\n  type: azureappinsights\n  default: true\n  azureappinsights:\n    connectionType: direct\n    resourceArmId: <your-arm-id>\n    accessToken: <your-access-token>\n    useAzureActiveDirectoryAuth: false\n")),(0,a.kt)("p",null,"Run this command in the terminal and specify the file above."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"tracetest apply datastore -f my/data-store/file/location.yaml\n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To learn more, ",(0,a.kt)("a",{parentName:"p",href:"../../examples-tutorials/recipes/running-tracetest-with-azure-app-insights"},"read the recipe on running a sample app with Azure App Insights and Tracetest"),".")),(0,a.kt)("h2",{id:"opentelemetry-collector"},"OpenTelemetry Collector"),(0,a.kt)("p",null,"You can configure Tracetest to listen for incoming telemetry data from ports ",(0,a.kt)("inlineCode",{parentName:"p"},"4317")," and ",(0,a.kt)("inlineCode",{parentName:"p"},"4318")," for gRPC and REST accordingly, giving you the option to stream the information to both Azure App Insights and Tracetest at the same time."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"Need help configuring the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/open-telemetry/opentelemetry-collector-contrib"},"OpenTelemetry Collector")," to send trace data from your application to Azure App Insights? Read more in ",(0,a.kt)("a",{parentName:"p",href:"../opentelemetry-collector-configuration-file-reference"},"the reference page here"),".")),(0,a.kt)("h3",{id:"tracetest-opentelemetry-collector-connection-to-azure-app-insights-with-the-web-ui"},"Tracetest OpenTelemetry Collector connection to Azure App Insights with the Web UI"),(0,a.kt)("p",null,"In the Web UI, (1) open Settings, and, on the (2) Configure Data Store tab, select (3) Azure App Insights, (4) Select Open Telemetry Collector as Connection Type."),(0,a.kt)("p",null,(0,a.kt)("img",{alt:"Azure App Insights Otel Connection Settings",src:n(67805).Z,width:"2560",height:"1712"})),(0,a.kt)("p",null,"From the configuration page, copy and customize the OpenTelemetry configuration YAML including the instrumentation key."),(0,a.kt)("h3",{id:"tracetest-opentelemetry-collector-connection-to-azure-app-insights-with-the-cli"},"Tracetest OpenTelemetry Collector connection to Azure App Insights with the CLI"),(0,a.kt)("p",null,"Or, if you prefer using the CLI, you can use this file config."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-yaml"},"type: DataStore\nspec:\n  name: AzureAppInsights\n  type: azureappinsights\n  default: true\n  azureappinsights:\n    connectionType: collector\n    useAzureActiveDirectoryAuth: false\n")),(0,a.kt)("p",null,"Run this command in the terminal and specify the file above."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"tracetest apply datastore -f my/data-store/file/location.yaml\n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"To learn more, ",(0,a.kt)("a",{parentName:"p",href:"/examples-tutorials/recipes/running-tracetest-with-azure-app-insights-collector"},"read the recipe on running a sample app with Azure App Insights, The OpenTelemetry Collector and Tracetest"),".")))}h.isMDXComponent=!0},41439:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/appinsights-direct-f4e1f7a199145d67ebbb7673d9b05d06.png"},67805:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/appinsights-otel-a92aa102262a82cc6992c19e498507ee.png"}}]);