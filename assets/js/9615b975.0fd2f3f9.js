"use strict";(self.webpackChunktracetest_docs=self.webpackChunktracetest_docs||[]).push([[6437],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>y});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var i=r.createContext({}),s=function(e){var t=r.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):c(c({},t),e)),n},p=function(e){var t=s(e.components);return r.createElement(i.Provider,{value:t},e.children)},u="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},d=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,i=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),u=s(n),d=o,y=u["".concat(i,".").concat(d)]||u[d]||m[d]||a;return n?r.createElement(y,c(c({ref:t},p),{},{components:n})):r.createElement(y,c({ref:t},p))}));function y(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,c=new Array(a);c[0]=d;var l={};for(var i in t)hasOwnProperty.call(t,i)&&(l[i]=t[i]);l.originalType=e,l[u]="string"==typeof e?e:o,c[1]=l;for(var s=2;s<a;s++)c[s]=n[s];return r.createElement.apply(null,c)}return r.createElement.apply(null,n)}d.displayName="MDXCreateElement"},29933:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>c,default:()=>m,frontMatter:()=>a,metadata:()=>l,toc:()=>s});var r=n(87462),o=(n(67294),n(3905));const a={},c="OpenTelemetry Collector",l={unversionedId:"configuration/connecting-to-data-stores/opentelemetry-collector",id:"configuration/connecting-to-data-stores/opentelemetry-collector",title:"OpenTelemetry Collector",description:"Tracetest receives trace data on port 4317. Tracetest's trace receiver endpoint might look like:",source:"@site/docs/configuration/connecting-to-data-stores/opentelemetry-collector.md",sourceDirName:"configuration/connecting-to-data-stores",slug:"/configuration/connecting-to-data-stores/opentelemetry-collector",permalink:"/configuration/connecting-to-data-stores/opentelemetry-collector",draft:!1,editUrl:"https://github.com/kubeshop/tracetest/blob/main/docs/docs/configuration/connecting-to-data-stores/opentelemetry-collector.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"OpenSearch",permalink:"/configuration/connecting-to-data-stores/opensearch"},next:{title:"SignalFx",permalink:"/configuration/connecting-to-data-stores/signalfx"}},i={},s=[{value:"Configuring OpenTelemetry Collector to Send Traces to Tracetest",id:"configuring-opentelemetry-collector-to-send-traces-to-tracetest",level:2},{value:"Configure Tracetest to Use OpenTelemetry Collector",id:"configure-tracetest-to-use-opentelemetry-collector",level:2},{value:"Connect Tracetest to OpenTelemetry Collector with the Web UI",id:"connect-tracetest-to-opentelemetry-collector-with-the-web-ui",level:2},{value:"Connect Tracetest to OpenTelemetry Collector with the CLI",id:"connect-tracetest-to-opentelemetry-collector-with-the-cli",level:2}],p={toc:s},u="wrapper";function m(e){let{components:t,...a}=e;return(0,o.kt)(u,(0,r.Z)({},p,a,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"opentelemetry-collector"},"OpenTelemetry Collector"),(0,o.kt)("p",null,"Tracetest receives trace data on port ",(0,o.kt)("inlineCode",{parentName:"p"},"4317"),". Tracetest's trace receiver endpoint might look like:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre"},"http://your-tracetest-instance.com:4317\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"Examples of configuring Tracetest can be found in the ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/kubeshop/tracetest/tree/main/examples"},(0,o.kt)("inlineCode",{parentName:"a"},"examples")," folder of the Tracetest GitHub repo"),".")),(0,o.kt)("h2",{id:"configuring-opentelemetry-collector-to-send-traces-to-tracetest"},"Configuring OpenTelemetry Collector to Send Traces to Tracetest"),(0,o.kt)("p",null,"If you don't want to use a trace data store, you can send all traces directly to Tracetest using your OpenTelemetry Collector. And, you don't have to change your existing pipelines to do so."),(0,o.kt)("p",null,"In your OpenTelemetry Collector config file:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"exporter")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"otlp/1")),(0,o.kt)("li",{parentName:"ul"},"Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"endpoint")," to your Tracetest instance on port ",(0,o.kt)("inlineCode",{parentName:"li"},"4317"))),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"If you are running Tracetest with Docker, and Tracetest's service name is ",(0,o.kt)("inlineCode",{parentName:"p"},"tracetest"),", then the endpoint might look like this ",(0,o.kt)("inlineCode",{parentName:"p"},"http://tracetest:4317"))),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"# collector.config.yaml\n\n# If you already have receivers declared, you can just ignore\n# this one and still use yours instead.\nreceivers:\n  otlp:\n    protocols:\n      grpc:\n      http:\n\nprocessors:\n  batch:\n    timeout: 100ms\n\nexporters:\n  # This is the exporter that will send traces to Tracetest\n  otlp/1:\n    endpoint: http://your-tracetest-instance.com:4317\n    tls:\n      insecure: true\n\nservice:\n  pipelines:\n    # your probably already have a traces pipeline, you don't have to change it.\n    # just add this one to your configuration. Just make sure to not have two\n    # pipelines with the same name\n    traces/1:\n      receivers: [otlp] # your receiver\n      processors: [batch]\n      exporters: [otlp/1] # your exporter pointing to your tracetest instance\n")),(0,o.kt)("h2",{id:"configure-tracetest-to-use-opentelemetry-collector"},"Configure Tracetest to Use OpenTelemetry Collector"),(0,o.kt)("p",null,"Configure your Tracetest instance to expose an ",(0,o.kt)("inlineCode",{parentName:"p"},"otlp")," endpoint to make it aware it will receive traces from the OpenTelemetry Collector. This will expose Tracetest's trace receiver on port ",(0,o.kt)("inlineCode",{parentName:"p"},"4317"),"."),(0,o.kt)("h2",{id:"connect-tracetest-to-opentelemetry-collector-with-the-web-ui"},"Connect Tracetest to OpenTelemetry Collector with the Web UI"),(0,o.kt)("p",null,"In the Web UI, (1) open Settings, and, on the (2) Configure Data Store tab, select (3) OpenTelemetry."),(0,o.kt)("p",null,(0,o.kt)("img",{alt:"OpenTelemetry",src:n(92239).Z,width:"2866",height:"1588"})),(0,o.kt)("h2",{id:"connect-tracetest-to-opentelemetry-collector-with-the-cli"},"Connect Tracetest to OpenTelemetry Collector with the CLI"),(0,o.kt)("p",null,"Or, if you prefer using the CLI, you can use this file config."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-yaml"},"type: DataStore\nspec:\n  name: Opentelemetry Collector pipeline\n  type: otlp\n  default: true\n")),(0,o.kt)("p",null,"Proceed to run this command in the terminal, and specify the file above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"tracetest apply datastore -f my/data-store/file/location.yaml\n")),(0,o.kt)("admonition",{type:"tip"},(0,o.kt)("p",{parentName:"admonition"},"To learn more, ",(0,o.kt)("a",{parentName:"p",href:"/examples-tutorials/recipes/running-tracetest-without-a-trace-data-store"},"read the recipe on running a sample app with OpenTelemetry Collector and Tracetest"),".")))}m.isMDXComponent=!0},92239:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"assets/images/open-telemetry-settings-482dae64a2d1b13c34d5df6fdca9a439.png"}}]);